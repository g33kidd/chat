<template name="sidebar">
	<div class="sidebar">
		<div class="user">
			{{#if currentUser}}
				<div class="profile">
					<img src="{{currentUser.services.twitter.profile_image_url}}" class="profile_image">
				</div>
				<div class="username">{{currentUser.profile.name}}</div>
			{{/if}}
			{{> userActions}}
		</div>
		
		{{#if currentUser}}
		<div class="section user-actions">
			<a href="{{pathFor 'main'}}" class="action home">
				<i class="fa fa-home"></i>
			</a>
			<a class="action twitter-chats">
				<i class="fa fa-twitter"></i>
			</a>
			<a class="action new">
				<i class="fa fa-plus"></i>
			</a>
			<a class="action settings">
				<i class="fa fa-cogs"></i>
			</a>
		</div>
		{{/if}}

		{{#if currentUser}}
		<div class="section my-chats">
			<div class="section-header">
				<div class="title">My Chats</div>
				<a href="#" class="new">New</a>
			</div>
			<div class="chats">
				{{#each myChats}}
					{{> chatMenuItem}}
				{{/each}}
			</div>
		</div>
		{{/if}}
		
		<div class="section public-chats">
			<div class="section-header">
				<div class="title">Public Chats</div>
			</div>
			<div class="chats">
				{{#each chats}}
					{{> chatMenuItem}}
				{{/each}}
			</div>
		</div>
	</div>
</template>

<template name="chatMenuItem">
	<a href="{{pathFor 'chat'}}">
	<div class="chat">
		<div class="name">{{name}}</div>
		<div class="count">{{userCount}}</div>
	</div>
	</a>
</template>

<template name="userActions">
	{{#if currentUser}}
	<a href="#" id="logout">Logout</a>
	{{else}}
	<button id="login" class="twitter-login">Twitter Login</button>
	{{/if}}
</template>