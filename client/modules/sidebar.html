<template name="sidebar">
	<div class="sidebar">
		<div class="user">
			{{#if currentUser}}
				<div class="avatar">{{currentUser.services.twitter.profileUrl}}</div>
				<div class="username">{{currentUser.services.twitter.screenName}}</div>
			{{/if}}
			{{> userActions}}
		</div>

		{{#if currentUser}}
		<div class="section my-chats">
			<div class="section-header">
				<div class="title">My Chats</div>
				<div class="new">New</div>
			</div>
			<div class="chats">
				{{#each myChats}}
					{{> chatMenuItem}}
				{{/each}}
			</div>
		</div>
		{{/if}}
		
		<div class="section public-chats">
			<div class="section-header">
				<div class="title">Public Chats</div>
				<div class="new">New</div>
			</div>
			<div class="chats">
				{{#each chats}}
					{{> chatMenuItem}}
				{{/each}}
			</div>
		</div>
	</div>
</template>

<template name="chatMenuItem">
	<div class="chat">
		<a href="{{pathFor 'chat'}}">
			<div class="name">{{name}}</div>
			<div class="count">{{userCount}}</div>
		</a>
	</div>
</template>

<template name="userActions">
	{{#if currentUser}}
	<a href="#" id="logout">Logout</a>
	{{else}}
	<button id="login" class="twitter-login">Twitter Login</button>
	{{/if}}
</template>